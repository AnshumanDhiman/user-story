(this["webpackJsonpeos-issue-request"]=this["webpackJsonpeos-issue-request"]||[]).push([[0],{100:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAfCAYAAACvUTALAAAABHNCSVQICAgIfAhkiAAACMhJREFUaEO1mW2IXOUVx89zX3aTreKCbQwaNUtMRNqG8S0EVpsJ0mD7QSMt4ofgTFpaKggaUFHUErFdP4jSUBD94j4gSL9Y9otLizTZ1EpbrLirWItBXVpsRdHkatxNmH3OkfO83PvcO/feuTPZLiyTnUzOzvOb//M//3MiYMQvemJDF0SwRzy4cnDEEqX/jH6xoQsU7BHPrW/d1d2buwjhnm/87aOR368Y5aAW1CwQACBI8fD6HMyCmgVl6z6/PnUNqHhWYQSkInnBGydGAjY0rBQUAmhYDtgvz+1gGhQGs8B1+dsBe+Hc6jIoBWOzqEJAikCpCIgi+c3Ft4cGNhSsHCiWZBHY4dEOVgqKPwQGpkCK341W14Aan1UqZEAOFPDPgJG86J3XhwLWGJYGBYG5ekZN5st/5Cv5+HAH06CUpyhfWT6wl4are3r3JV2iyCoqBqcsRKMw/pkolFv+9VpjYI1gNQLlADKwmWYH6wPFSnKA3KODx3XnmtU1oOIUlFNWHlQECkMAFcrL3/9TI2ADYaWgfAU5dfkqc1fS+I0UT9YfjH5mlWq8KfuuA8Z15+vralA4NssgECPQgDDWj/oq8qN7nhWmfw7lFcsvDwRWC2sgKB+QrwhzeCmeLj9YI1BVABnYK+V1GRTi+KwB5EBZIJWgYqMwCuWV/3mpFlglLA2KPI8qepWCBIAWQIlbUw8rAiOQ4kj+YBoU1/UVlAeTANm6FcBQgQwX8nVPX3+pjQesFAPAV5JSQUIULSBGt6bPW+/SHmYV9p2PX6wEVgqrESjVa4uZ3iI9uHEOyAJzAPxDIjwmnlk5zL0gByr/GhcXEljrtcVcb5FumZCA0EljhP0gCAOnGjn26mf6YF9et6VNYvyYuXrelbNdkEGAiq7ecmJh8cNt+6TCqMPAfNM33dKYfuvT50uB9cFKQZV1O/OGE0AL6v64BRAfA4DJnO84s1ewBKsrbSHhlAbFOapKUQgpKBeU6eYJCZQBIwr1gUw302qQLpF/dvUOCRB3Ks1cBXLq/aMawnuX3SKRQg3Mfz3XN94Wyms/f7YPWA7W/w3UT/RoVH/1WKmsqB/GLRBRR7y8ekir8fsTEhR0XLtPQaUHjeUFr5tE/sl3d0qCuON7Vt7UA3nF8rx+7bsX3y6VBWYBOVCAGHATkLu+OJIDlsKiX9sD+UHT73pliiKrqH5zzxTFoDifleUn81wCPihWKsKk7qjWyFX7fKlUnCrBB2auUpwm8v9etUsDK+96rKRAXvXR7zWEtzbdKZGCjqeoHDDESE6vPJkC07AGglqDBMi7euRdvSagquNAOSgLFtcyI1+d3iQJI6uwyI4umYlzXrronTf0wf6940ZJNGYUlpq3jQ36CgfSGfmbF/5UIrGH8RUMdFMwj+ZKAgXyhjMzuq7QoKqSufOoMlC+mWcBcgnOWI9iRXHXKxp5Bs54n7t6/AGwUm3uIhTarBUGcvzVz/WbPb3rMqko6phY4L7dKJNP5B9M7ZMEkVFYiZkjCtn6VOq6/5i8qwaYBifbvcMHBf1qQgJAp2+ESRM5zYmZ1du0Au/f+BtAcU86E+ZBVIMqNXWaE3O27g+8ugjWM2z7x3Bp/KuzbbF46tQX12/rKuQRxiirNJFTKC8/YRI5GzkDK3Y9Tzmpkf/9/EP2SvrKCgAgBIUiEWtxy1zDx22bbpDI6ZDX0v2ud7agqLpknvlXmsjpJtP5fHNWGC9tXFnVoE5es61LEOvAWexi2aznEjoncmPk/7z4x8bD0hiRv2rsYbu//K1+7V8mHpCEpksSCSAIAZVIhArbe+HhxczgD3tt2k/m/mxmEzndbdVoRpsl8EH5a5ZqU8/WMBxc/2gCJhs5ojFn1KBWLKjtXYIol8yrRxc78+lE7oz8gO2SmRf5pq6UkNMrT+n38OexRyRB2CEI2NsSoQINSnuWv/yjR0qA5b0pTeR0l1ZYKwXV9Wa9/iHYrFuqn5fiqAG2Ov0tiRS3Jgqg7B4qN9sNAsYzn2/k+kp65p0DhoH8njXyY/FjEjHYH3ig+mDpK/mQdyXLTVyKZ8zBqAuTOnD6oMpHlAQULeik7xZ7uUSuZ7k0kVNrctJcve16e5AfXUxCN4u8MAGKFhSGeoQp5isGw3VdImcjN8B0MyjpfoE2cj7bMXhi6154aNkXU/m4c59VWP+s5xQi3Y5cgxo06/V6bTHfW6xK5M6D+GAukZ9sbe+iGEsXd0UzX1OhviJTy68s+ok8b+b9ifyv5927ABDu8YGxiTNYgAAUiSM3rT16rw/J/bl6kHZGnu2pss2oXcMA4vGmoNIRxiZyM7rYrmaCpZ3VQom94DiKbMNZDkpoUK7uu5fcLpU151LlYCCVCo+DYO/LTN6AYgym6wVKpB5VBFa/omEj59msCKx8CC56UgJWUcVfqhM5D7NuO4DGlN0QnK5X0o1mFijVWpgIzINy9d/afECiMgHTfZcFzcyrGFoAxsxFEmA1qFLPKh7MGnk5sLo1C28P5nvpJ1+se3Z6kwaWzXyF1a/dRxXXLFWgXH2TyF37L+9+zuT9eBBg3N4LD1S+30awtJH/3AyzNd3M/W+MmfUGgHIHyyfy+o0m76P4QFPL87UHyhK5AdavLBM0kQQv/PTVCxuAagxLAzvohdG6obghKAfs5LU7JLLCala/BlTUCJSrmyXy1ORTE0cKeObjUSoJMRqoqIEGX9YN6EANMB62edaruXplNfm5T3bu1MDS9p/zquFBud/DiRz0lbQxAXiLapM5igQxau8bcPUGRoeqQ2mF3VFyJd36ZgRQ7nf979u7jML6QIVDKar43v1EzltWbeZaUTzC1HvUUN2wChr9yAPm1jfnAMr9Hl6tmHWJXqMkisL2jgYeVffh8t9xIgfeW9kRBikcSlEjXUP/TekduYL9es+1DqBcbd6R86ihKFgXUK7u0XBGIor9o4IayuBLPezmDVvFH87kRoJBn3KTv/9w8/6tUx/PrXvdshGmyftxr/kannA6DfgyXbIAAAAASUVORK5CYII="},111:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Registrarse","title-sign-up":"Reg\xedstrate","login-label":"Iniciar sesi\xf3n","register-label":"Registrarse","submit-label":"Enviar","header-left":"Historias de usuarios","user-stories-description":"Comparta con nosotros c\xf3mo usa nuestros productos, se relaciona con las historias de otros usuarios, vote por ellos y nos aseguraremos de brindar soluciones coherentes que mejoren su experiencia.","footer-left":"Este sitio guarda cierta informaci\xf3n en cookies pero solo cuando es estrictamente necesario","username-label":"Ingrese su nombre de usuario","email-label":"Introduce tu correo electr\xf3nico","password-label":"Ingresa tu contrase\xf1a","confirm-password-label":"Confirmar contrase\xf1a","forgot-password":"\xbfSe te olvid\xf3 tu contrase\xf1a?","reset-password":"Configura tu nueva contrase\xf1a","old-password":"Ingrese su contrase\xf1a anterior","new-password":"Nueva contrase\xf1a","confirm-password":"Confirmar contrase\xf1a","create-account":"Crea una cuenta","footer-right":"2020 EOS","existing-user":"\xbfUsuario existente?","reset-password-done":"Ll\xe9vame a la p\xe1gina de inicio de sesi\xf3n","success":"\xc9xito"}}')},112:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Sign in","title-sign-up":"Sign up","login-label":"Login","register-label":"Register","submit-label":"Submit","header-left":"User Story","user-stories-description":"Share with us how you use our products, relate to other users\' stories, vote them up, and we\'ll make sure we deliver cohesive solutions that enhance your experience.","footer-left":"This site saves some information in cookies but only when strictly necessary","username-label":"Enter your username","email-label":"Enter your email","password-label":"Enter your password","confirm-password-label":"Confirm password","forgot-password":"Forgot password?","reset-password":"Set your new password","old-password":"Enter your old password","new-password":"New password","confirm-password":"Confirm password","create-account":"Create an account","footer-right":"2020 EOS","existing-user":"Existing user?","reset-password-done":"Take me to the sign-in page","success":"Success"}}')},115:function(e,t,a){e.exports=a(284)},126:function(e,t,a){},14:function(e){e.exports=JSON.parse('{"b":"https://us-strapi.eosdesignsystem.com","a":"dev"}')},147:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},148:function(e,t,a){e.exports=a.p+"static/media/user-story-graphic.b152d872.svg"},284:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(95),s=a.n(c),o=a(114),l=a(2),i=a(5),u=(a(125),a(126),a(1)),m=a.n(u),d=a(3),p=a(8),f=a(7),E=a(11),v=a(27),b=function(e){var t=e.children,a=e.className,n=e.action,c=e.type,s=e.onClick,o=e.disabled,l=Object(v.a)(e,["children","className","action","type","onClick","disabled"]);return r.a.createElement("button",Object.assign({className:a,action:n,type:c,onClick:s,disabled:o},l),t)},h=function(e){var t=e.isActive,a=e.children,n=e.cancelText,c=e.okText,s=e.onCancel,o=e.onOk,l=e.showButtons,i=e.active;return r.a.createElement(r.a.Fragment,null," ",t?r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card"},r.a.createElement("div",{className:"flex flex-row modal-content"},a),l&&r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement(b,{className:"btn btn-default",onClick:s},n||"Cancel"),r.a.createElement(b,{className:"btn btn-default",onClick:o},c||"Accept")))):"",i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card-vote"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{className:"close-icon",onClick:e.handleClose},"\xd7"),e.content)))):"")},g=a(9),y=a(12),w=a.n(y),N=a(14),O={baseURL:N.b,withCredentials:!0},j=w.a.create(O);j.interceptors.response.use((function(e){return"prod"!==N.a&&console.log("RESPONSE: ",e),e}),(function(e){if(e.response)return console.log("RESPONSE_ERROR: ",e.response),Promise.reject(e.response);e.request?console.log("NO_RESPONSE: ",e.request):console.log("REQUEST_ERROR: ",e.message)}));var k=function(e,t){return j.request(Object(g.a)({url:e,method:"post",data:t},O))},x="fragment BasicStoryInfo on UserStory {\n  id\n  Title\n  Description\n  followers {\n    id\n    username\n  }\n}",S="fragment NotificationData on UserStoryNotification {\n  message\n  id\n  users {\n    id\n  }\n  seenBy {\n    id\n  }\n  date\n  link\n}",C={createStory:function(e){return k("/user-stories",e)},checkAuthor:function(e,t){return k("/checkAuthor",{id:e,storyId:t})},getStoriesByTitle:function(e){var t={query:'query {\n        userStories(sort: "votes:desc,createdAt:desc", where: {\n          Title_contains: "'.concat(e,'"\n        }) {\n          ...BasicStoryInfo\n        }\n      }\n      ').concat(x,"\n      ")};return k("/graphql",t)},getStories:function(e,t,a,n,r,c,s,o){a=a?'id: "'.concat(a,'"'):"",o=o?'followers: "'.concat(o,'"'):"";var l={query:'query {\n              userStories(sort: "createdAt:desc", limit: 5, start: '.concat(5*(e-1),', where: {\n                  user_story_status : {\n                    Status: "').concat(t,'"\n                  },\n                  author: {\n                    ').concat(a,'\n                    username_contains: "').concat(n,'"\n                  }\n                  ').concat(r,"\n                  ").concat(c,"\n                  ").concat(s,"\n                  ").concat(o,"\n              }) {\n                id\n                Title\n                Description\n                user_story_status {\n                  Status\n                }\n                user_story_comments {\n                  Comments\n                }\n                product {\n                  Name\n                }\n                Attachment {\n                  id\n                  url\n                }\n                author {\n                  id\n                  username\n                  profilePicture {\n                    id\n                    url\n                  }\n                }\n                followers {\n                  id\n                  username\n                }\n                Category\n              }\n            }\n            ")};return k("/graphql",l)},getStory:function(e){var t={query:'query {\n        userStory(id: "'.concat(e,'") {\n          ...BasicStoryInfo\n          user_story_status {\n            Status\n          }\n          author {\n            id\n            username\n          }\n          Attachment {\n            id\n            url\n          }\n        }\n      }\n      ').concat(x,"\n      ")};return k("/graphql",t)},getStoryCount:function(e,t,a,n,r,c,s){t=t?'id: "'.concat(t,'"'):"",s=s?'followers: "'.concat(s,'"'):"";var o={query:'query {\n              userStoriesConnection(where: {\n                user_story_status: {\n                  Status: "'.concat(e,'"\n                },\n                author: {\n                  ').concat(t,'\n                  username_contains: "').concat(a,'"\n                }\n                ').concat(n,"\n                ").concat(r,"\n                ").concat(c,"\n                ").concat(s,"\n              }) {\n                aggregate {\n                  count\n                }\n              }\n            }")};return k("/graphql",o)},updateUserStoryDescription:function(e,t){var a={query:'mutation {\n        updateUserStory(\n          input: { where: { id: "'.concat(e,'" }, data: { Description: "').concat(t,'" } }\n        ) {\n          userStory {\n            updatedAt\n          }\n        }\n      }')};return k("/graphql",a)},getCategories:function(){return k("/graphql",{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'})},getPolicies:function(){return k("/graphql",{query:"query {\n        userStoryPolicies {\n          Description\n        }\n      }"})},getPriorities:function(){return k("/graphql",{query:'query { __type(name: "ENUM_USERSTORY_PRIORITY") {enumValues {name}}}'})},getProducts:function(){return k("/graphql",{query:"query {\n              products {\n                Name\n              }\n            }"})},getProductsWithTemplates:function(){return k("/graphql",{query:"query {\n              products {\n                id\n                Name\n                product_template\n              }\n            }"})},getNotificationsByUserId:function(e){var t={query:'query {\n        userStoryNotifications (where: {\n          users: {\n            id: "'.concat(e,'"\n          }\n        }){\n          ...NotificationData\n        }\n      }\n      ').concat(S,"\n      ")};return k("/graphql",t)},getPolicyNotifications:function(){var e={query:'query {\n            userStoryNotifications(where: {message: "User story privacy policy has been updated"}) {\n              ...NotificationData\n            }\n          }\n          '.concat(S,"\n          ")};return k("/graphql",e)},markNotificationAsRead:function(e,t){var a={query:'mutation updateNotifications($seenBy: [ID]) {\n        updateUserStoryNotification(input: {\n          where: {\n            id: "'.concat(e,'"\n          }\n          data: {\n            seenBy: $seenBy\n          }\n        }) {\n          userStoryNotification {\n            id\n          }\n        }\n      }'),variables:{seenBy:t}};return k("/graphql",a)},getUserDetails:function(e){var t={query:'query {\n        user(id: "'.concat(e,'") {\n          profilePicture {\n            id\n            url\n          }\n          Name\n          Bio\n          username\n          Company\n          Profession\n          email\n          LinkedIn\n          Twitter\n        }\n      }\n      ')};return k("/graphql",t)},updateUser:function(e){var t,a,n,r,c,s,o={query:'mutation {\n        updateUser(input: {\n          where: {\n            id: "'.concat(e.id,'"\n          }\n          data: {\n            Name: "').concat(null!==(t=e.Name)&&void 0!==t?t:e.username,'"\n            Profession: "').concat(null!==(a=e.Profession)&&void 0!==a?a:"",'"\n            Company: "').concat(null!==(n=e.Company)&&void 0!==n?n:"",'"\n            LinkedIn: "').concat(null!==(r=e.LinkedIn)&&void 0!==r?r:"",'"\n            Twitter: "').concat(null!==(c=e.Twitter)&&void 0!==c?c:"",'"\n            Bio: "').concat(null!==(s=e.Bio)&&void 0!==s?s:"",'"\n          }\n        }) {\n          user {\n            username\n          }\n        }\n      }')};return k("/graphql",o)},getComments:function(e){var t={query:'\n      query {\n        userStory(id: "'.concat(e,'") {\n          user_story_comments {\n            id\n            Comments\n            user {\n              id\n              username\n            }\n            createdAt\n            attachment {\n              url\n              id\n            }\n            user_story_comment_replies {\n              createdAt\n              Comments\n              user {\n                id\n                username\n              }\n              attachment {\n                id\n                url\n              }\n            }\n          }\n        }\n       }')};return k("/graphql",t)},postComment:function(e){return k("/user-story-comments",e)},postCommentReply:function(e){return k("/user-story-comment-threads",e)},updateVotes:function(e,t){var a={query:'\n      mutation {\n        updateUserStory(input: {where: {id: "'.concat(e,'"} data: {followers: [').concat(t,"]}}){\n          userStory{\n            followers {\n              id\n            }\n          }\n        }\n      }\n      ")};return k("/graphql",a)}},A=function(e){var t=e.story,a=localStorage.getItem("id"),c=t.followers.map((function(e){return JSON.stringify(e.id)})),s=Object(n.useState)(c),o=Object(l.a)(s,2),u=o[0],p=o[1],f=Object(n.useState)(t.followers.length),E=Object(l.a)(f,2),v=E[0],b=E[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),w=y[0],N=y[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),k=j[0],x=j[1],S=Object(n.useState)(!1),A=Object(l.a)(S,2),P=A[0],U=A[1],T=function(){U(!P)};Object(n.useEffect)((function(){t.followers.map((function(e){return e.id})).includes(a)&&x(!0)}),[t.followers,a]);var R=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(!0),!k){e.next=12;break}return n=u.filter((function(e){return e!==JSON.stringify(a)})),e.next=5,C.updateVotes(t.id,n);case 5:r=e.sent,n=r.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),p(n),x(!1),b((function(e){return e-1})),e.next=21;break;case 12:return u.push(JSON.stringify(a)),c=u,e.next=16,C.updateVotes(t.id,c);case 16:s=e.sent,c=s.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),p(c),x(!0),b((function(e){return e+1}));case 21:N(!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"flex flex-column vote-wrapper ".concat(a&&k?"vote-wrapper-voted":"")},r.a.createElement("div",{className:"votes-count",onClick:T},v),r.a.createElement("div",{className:"vote-button ".concat(a?"vote-button-clickable":""),onClick:function(){a&&!w&&R(t)}},r.a.createElement("i",{className:"eos-icons"},"thumb_up"),"Vote"),P&&r.a.createElement(h,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,0===t.followers.length?r.a.createElement("h1",null,"No Voters For This Story"):r.a.createElement("h1",null,"Voters For This Story")),t.followers.map((function(e){return r.a.createElement("div",{className:"flex flex-row author-information"},r.a.createElement("div",{className:"user-avatar avatar-vote"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",null,r.a.createElement(i.a,{className:"link-vote link link-default",to:"/profile/".concat(e.id)},e.username)))}))),handleClose:T,active:P}))},P=function(e){return e=(e=e.replace(/\\*"/g,'\\"')).replace(/[\r\n]/g,"")},U=function(e,t){return(e=e.replace(/<\s*[^>]*>/gi,"")).length>t&&(e="".concat(e.substring(0,t),"...")),e},T=function(e){var t=e.stories,a=e.state,n=e.product;return r.a.createElement("div",{className:"flex flex-column","data-cy":"stories"},t&&t.length?t.map((function(e,t){var c,s,o,l;return(null===(c=e.user_story_status)||void 0===c?void 0:c.Status)!==a||e.product.Name!==n&&"All"!==n?"":r.a.createElement("div",{className:"story",key:t},r.a.createElement(A,{story:e}),r.a.createElement("div",{className:"stories-content",onClick:function(){Object(i.c)("/story/".concat(e.id))}},r.a.createElement("h3",null,U(e.Title,80)),r.a.createElement("p",null,U(e.Description,80))),r.a.createElement("div",{className:"story-author story-subcontent"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:null!==(s=null===e||void 0===e||null===(o=e.author)||void 0===o||null===(l=o.profilePicture)||void 0===l?void 0:l.url)&&void 0!==s?s:"https://avatars.dicebear.com/api/jdenticon/".concat(e.author.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("small",null,"Created by"),r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.author.id)},e.author.username))),r.a.createElement("div",{className:"flex flex-column story-subcontent"},r.a.createElement("small",null,"Category"),r.a.createElement("span",{className:"category-text"},e.Category)),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("span",{className:"story-meta"},r.a.createElement("i",{className:"eos-icons"},"attachment"),e.Attachment.length),r.a.createElement("span",{className:"story-meta"},r.a.createElement("i",{className:"eos-icons"},"comment"),e.user_story_comments.length)))})):r.a.createElement("h3",null,"No stories"))},R=function(e){var t=e.getPage,a=e.storyCount,c=e.status,s=e.product,o=Object(n.useState)(1),i=Object(l.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(l.a)(d,2),E=p[0],v=p[1];return Object(n.useEffect)((function(){m(1),t(1)}),[c,s,t]),Object(n.useEffect)((function(){if(a)if(a>=5){var e=Math.ceil(a/5);v(Object(f.a)(Array(e+1).keys()).slice(1))}else v([1])}),[a]),r.a.createElement("div",{className:"pagination"},r.a.createElement("span",{className:"btn btn-pagination ".concat(u<=1?"btn-pagination-disabled":""),onClick:function(){E.find((function(e){return e===u-1}))&&(m((function(e){return e-1})),t(u-1))}},r.a.createElement("i",{className:"eos-icons eos-18"},"keyboard_arrow_left"),"Prev"),r.a.createElement("div",{className:"btn btn-pagination"},E?E.map((function(e,a){return r.a.createElement("span",{className:"number ".concat(u===e?"selected":""),onClick:function(){m(e),t(e)},key:a},e)})):""),r.a.createElement("span",{className:"btn btn-pagination ".concat(u>=(null===E||void 0===E?void 0:E.length)?"btn-pagination-disabled":""),onClick:function(){E.find((function(e){return e===u+1}))&&(m((function(e){return e+1})),t(u+1))}},"Next",r.a.createElement("i",{className:"eos-icons eos-18"},"keyboard_arrow_right")))},I=function(e){var t=e.title,a=e.reference,c=e.curr,s=e.setCurr,o=e.itemList,i=Object(v.a)(e,["title","reference","curr","setCurr","itemList"]),u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-title"},t),r.a.createElement("div",Object.assign({className:"dropdown-container",ref:a},i),r.a.createElement(b,{type:"button",className:"btn btn-transparent",onClick:function(){p(!d)}},d?r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_up"):r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_down"),"\xa0 ",c),r.a.createElement("div",{className:"dropdown ".concat(d?"dropdown-open dropdown-right":"dropdown-close dropdown-right")},r.a.createElement("ul",{className:"dropdown-list"},o.map((function(e,t){return r.a.createElement("li",{key:t,className:"dropdown-element",onClick:function(){return s(e),void p(!1)}},e)}))))))},q=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(147),alt:"loader"}))},L=function(e){var t=e.isOpen,a=e.userTerm,c=e.setUserTerm,s=e.setAuthorQuery,o=e.setUsersSuggestionOpen,i=Object(n.useState)([]),u=Object(l.a)(i,2),p=u[0],f=u[1],v=Object(E.usePromiseTracker)({area:"user-suggest-dropdown"}).promiseInProgress,b=Object(n.useRef)(null),h=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[o]),Object(n.useEffect)((function(){if(a.length<=0)o(!1);else{"undefined"!==typeof h.current&&h.current.cancel(),h.current=w.a.CancelToken.source();var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("".concat(N.b,"/graphql"),{query:'query {\n            users (where: {\n              username_contains: "'.concat(a,'"\n            }) {\n              id\n              username\n              profilePicture {\n                url\n              }\n            }\n          }')},{cancelToken:h.current.token});case 2:r=e.sent,f(null!==(t=null===(n=r.data.data)||void 0===n?void 0:n.users)&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.length>0?Object(E.trackPromise)(e(),"user-suggest-dropdown"):f([])}}),[a,o]),t?r.a.createElement("div",{ref:b,className:"flex flex-center dropdown user-suggest-dropdown"},v?r.a.createElement(q,null):p.length>0?r.a.createElement("ul",{className:"dropdown-list"},p.map((function(e){var t,a;return r.a.createElement("li",{key:e.id,onClick:function(){c(e.username),s(e.username),o(!1)},className:"user-data"},r.a.createElement("div",{className:"user-row flex flex-space-between flex-align-center"},r.a.createElement("img",{className:"avatar",src:null!==(t=null===e||void 0===e||null===(a=e.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"}),r.a.createElement("span",null,e.username)))}))):r.a.createElement("p",null,"No users found")):null};var F=function(e){var t=e.searchTerm,a=e.setSearchTerm,c=e.userTerm,s=e.setUserTerm,o=e.setSearchQuery,i=e.setAuthorQuery,u=Object(n.useRef)(),m=Object(n.useState)("Title"),d=Object(l.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(l.a)(E,2),h=v[0],g=v[1],y=function(){"Title"===p&&t.length>0?o('Title_contains: "'.concat(t,'"')):c.length>0&&(i(c),g(!1))};return r.a.createElement("div",{className:"flex flex-row search-controls"},r.a.createElement("div",{className:"flex flex-row search-input","data-cy":"search-input-div"},r.a.createElement("span",null,r.a.createElement("i",{className:"eos-icons"},"search")),r.a.createElement(L,{isOpen:h,userTerm:c,setUserTerm:s,setAuthorQuery:i,setUsersSuggestionOpen:g}),r.a.createElement("input",{type:"text",name:"search",placeholder:"Search",autoComplete:"off","data-cy":"search-input",value:"Title"===p?t:c,onChange:function(e){"Title"===p?a(e.target.value):(s(e.target.value),g(!0))},onKeyDown:function(e){"Enter"===e.key&&y()},onFocus:function(){"Author"===p&&c.length>0&&g(!0)}}),r.a.createElement("div",{className:"close-btn-div"},r.a.createElement("span",{className:"close-btn","data-cy":"btn-clear",onClick:function(){"Title"===p&&t.length>0?a(""):c.length>0&&s("")}},("Title"===p&&t.length>0||"Author"===p&&c.length>0)&&r.a.createElement("i",{className:"eos-icons"},"close"))),r.a.createElement(I,{title:"",reference:u,curr:p,setCurr:f,itemList:["Title","Author"],"data-cy":"toggle-title-dropdown"})),r.a.createElement(b,{type:"submit",className:"btn btn-default","data-cy":"btn-search",onClick:y},"Search"))},B={stateList:[{icon:"watch_later",status:"Under consideration"},{icon:"check_circle",status:"Planned"},{icon:"create",status:"Designing"},{icon:"code",status:"Implementing"},{icon:"patch_fixes",status:"Testing"},{icon:"deploy",status:"Deployed"}],sortByList:["Most Voted","Most Discussed"]},D=function(e){var t=e.authorId,a=e.followerId,c=Object(n.useState)("Under consideration"),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(1),p=Object(l.a)(u,2),v=p[0],h=p[1],g=Object(n.useState)("All"),y=Object(l.a)(g,2),w=y[0],N=y[1],O=Object(n.useState)("Most Voted"),j=Object(l.a)(O,2),k=j[0],x=j[1],S=Object(n.useState)("All"),A=Object(l.a)(S,2),P=A[0],U=A[1],L=Object(n.useState)([]),D=Object(l.a)(L,2),_=D[0],V=D[1],M=Object(n.useState)([]),H=Object(l.a)(M,2),Y=H[0],K=H[1],W=Object(n.useState)(""),z=Object(l.a)(W,2),G=z[0],Q=z[1],X=Object(E.usePromiseTracker)({area:"stories-div"}).promiseInProgress,J=Object(n.useState)(),Z=Object(l.a)(J,2),$=Z[0],ee=Z[1],te=Object(n.useState)([]),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useRef)(),se=Object(n.useRef)(),oe=Object(n.useRef)(),le=Object(n.useState)(""),ie=Object(l.a)(le,2),ue=ie[0],me=ie[1],de=Object(n.useState)(""),pe=Object(l.a)(de,2),fe=pe[0],Ee=pe[1],ve=Object(n.useState)(""),be=Object(l.a)(ve,2),he=be[0],ge=be[1],ye=Object(n.useState)(""),we=Object(l.a)(ye,2),Ne=we[0],Oe=we[1],je=Object(n.useState)(""),ke=Object(l.a)(je,2),xe=ke[0],Se=ke[1],Ce=Object(n.useCallback)((function(e){h(e)}),[]);return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getStoryCount(o,t,xe,fe,ue,he,a);case 2:n=e.sent,ee(n.data.data.userStoriesConnection.aggregate.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o,w,fe,ue,he,xe,t,a]),Object(n.useEffect)((function(){me("All"!==w?'product : {Name: "'.concat(w,'"}'):""),Ee("All"!==P?'Category : "'.concat(P,'"'):""),""===G&&ge(""),""===Ne&&Se("")}),[w,P,G,Ne]),Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getStories(v,o,t,xe,fe,ue,he,a);case 2:n=e.sent,re(n.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e(),"stories-div")}),[fe,o,v,ue,he,xe,t,a]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getProducts();case 2:return a=e.sent,e.abrupt("return",null!==a.data.data.product?V(["All"].concat(Object(f.a)(null===(t=a.data.data.products)||void 0===t?void 0:t.map((function(e){return e.Name}))))):V(["All"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getCategories();case 2:t=e.sent,K(["All"].concat(Object(f.a)(t.data.data.__type.enumValues.map((function(e){return e.name})))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=function(e,t){return e.followers.length>t.followers.length?-1:1},t=function(e,t){return e.user_story_comments.length>t.user_story_comments.length?-1:1},a=function(){var a=Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Most Voted"===k&&re(ne.sort(e)),"Most Discussed"===k&&re(ne.sort(t));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(E.trackPromise)(a(),"stories-div")}),[k,ne,re]),r.a.createElement("div",null,r.a.createElement("div",{className:"roadmap"},B.stateList&&B.stateList.map((function(e,t){return r.a.createElement(b,{className:o===e.status?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",key:t,onClick:function(){i(e.status),h(1)}},r.a.createElement("i",{className:"eos-icons"},e.icon),e.status)}))),r.a.createElement("div",{className:"flex flex-row search-bar"},r.a.createElement(F,{searchTerm:G,setSearchTerm:Q,userTerm:Ne,setUserTerm:Oe,setSearchQuery:ge,setAuthorQuery:Se}),r.a.createElement("div",{className:"flex flex-row options-bar"},r.a.createElement(I,{title:"Product",reference:ce,curr:w,setCurr:N,itemList:_,"data-cy":"product-dropdown"}),r.a.createElement(I,{title:"Categories",reference:oe,curr:P,setCurr:U,itemList:Y,"data-cy":"category-dropdown"}),r.a.createElement(I,{title:"Sort By",reference:se,curr:k,setCurr:x,itemList:B.sortByList}))),X?r.a.createElement(q,null):r.a.createElement("div",{className:"stories-div"},r.a.createElement(T,{stories:ne,state:o,product:w})),r.a.createElement(R,{getPage:Ce,storyCount:$,status:o,product:w}))},_=a(99),V=a.n(_),M=Object(n.createContext)(),H=function(){var e=Object(n.useContext)(M).dispatch;return{registerUser:function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("".concat(N.b,"/auth/local/register"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("".concat(N.b,"/auth/local"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("".concat(N.b,"/logout"),{},{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:localStorage.clear();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),forgotPassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("".concat(N.b,"/auth/forgot-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),resetPassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("".concat(N.b,"/auth/reset-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),changePassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.password===a.passwordConfirmation){t.next=3;break}return e({type:"ERROR",payload:"The new password and confirm passwords do not match."}),t.abrupt("return",null);case 3:return t.next=5,w.a.post("".concat(N.b,"/auth/change-password"),a,{withCredentials:!0}).catch((function(t){var a,n,r,c,s;"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:null===(a=t.response.data)||void 0===a||null===(n=a.message)||void 0===n||null===(r=n[0])||void 0===r||null===(c=r.messages)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.message})}));case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Y=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(M).state,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1],u=Object(n.useState)(!1),p=Object(l.a)(u,2),f=p[0],E=p[1],v=Object(n.useState)(0),b=Object(l.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),N=w[0],O=w[1],j=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){j.current&&!j.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[j]),Object(n.useEffect)((function(){e&&function(){var t=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getNotificationsByUserId(e);case 2:a=t.sent,n=[],a.data.data.userStoryNotifications&&(n=(n=a.data.data.userStoryNotifications).filter((function(t){return!t.seenBy.map((function(e){return e.id})).includes(e)}))),o(n),g(n.length);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e,N]);var k=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=a.seenBy.map((function(e){return e.id}))).includes(e)){t.next=5;break}return n.push(e),t.next=5,C.markNotificationAsRead(a.id,n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:Object(i.c)("/".concat(t.link));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){E(!f),O(!0)},ref:j},r.a.createElement("i",{className:"eos-icons ".concat(f?"eos-icons-open":"")},"notifications"),r.a.createElement("span",{className:"notifications-count"}," ",!N&&h>0?h:""),r.a.createElement("div",{className:"dropdown notifications-dropdown ".concat(f?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list"},s?s.map((function(e,t){return r.a.createElement("li",{className:"dropdown-element",onClick:function(){return x(e)},key:t},e.message,r.a.createElement("hr",{className:"dropdown-separator"}))})):""),r.a.createElement("div",{className:"flex flex-row flex-space-between notifications-options"},s&&s.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"#",onClick:function(){s&&s.forEach(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:o([]),g(0),O(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Mark all as read")):"No new notifications at the moment",r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"/notifications"},"View all")))))},K=function(e){var t=H().logout,a=localStorage.getItem("username"),c=localStorage.getItem("email"),s=Object(n.useContext)(M),o=s.state,u=s.dispatch,p=Object(n.useState)(!1),f=Object(l.a)(p,2),E=f[0],v=f[1],b=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]);var h=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:u({type:"DEAUTHENTICATE"}),Object(i.c)("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("header",{className:"nav-header"},r.a.createElement(i.a,{className:"link","data-cy":"nav-eos-logo",to:"/"},r.a.createElement("img",{className:"logo",src:V.a,alt:""})),r.a.createElement("nav",{className:"navbar-content"},o.auth&&r.a.createElement(i.a,{className:"btn btn-default","data-cy":"btn-new-story",to:"/newStory"},"+ New Story"),!o.auth&&r.a.createElement(i.a,{className:"btn btn-default","data-cy":"btn-signin",to:"/login"},"Sign In"),r.a.createElement(Y,null),o.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){v(!E)},ref:b},r.a.createElement("i",{className:"eos-icons ".concat(E?"eos-icons-open":"")},"account_circle"),r.a.createElement("div",{className:"dropdown nav-dropdown ".concat(E?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list"},r.a.createElement("li",{className:"user-dropdown user-dropdown-name"},a),r.a.createElement("li",{className:"user-dropdown user-dropdown-email"},c),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myStories")}},r.a.createElement("i",{className:"eos-icons eos-18"},"message"),"My Stories"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myProfile")}},r.a.createElement("i",{className:"eos-icons eos-18"},"settings"),"My Account"),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:h},r.a.createElement("i",{className:"eos-icons eos-18"},"exit_to_app"),"Log Out"))))))},W=function(){var e=H().logout,t=localStorage.getItem("id"),c=Object(n.useContext)(M).dispatch,s=Object(n.useState)(!1),o=Object(l.a)(s,2),u=o[0],f=o[1],E=Object(n.useState)(),v=Object(l.a)(E,2),b=v[0],g=v[1];Object(n.useEffect)((function(){t&&function(){var e=Object(d.a)(m.a.mark((function e(){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPolicyNotifications();case 2:(a=e.sent).data.data.userStoryNotifications&&(r=null===(n=a.data.data.userStoryNotifications[0])||void 0===n?void 0:n.seenBy.map((function(e){return e.id})),a.data.data.userStoryNotifications.length&&!r.includes(t)&&(f(!0),g(a.data.data.userStoryNotifications[0])));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var y=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=b.seenBy.map((function(e){return e.id}))).push(t),e.next=4,C.markNotificationAsRead(b.id,a);case 4:f(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var a=Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,e();case 3:c({type:"DEAUTHENTICATE"});case 4:f(!1);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Home | EOS User story"),r.a.createElement("meta",{name:"description",content:"Share with us how you use our products, relate to other users stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience."}),r.a.createElement("meta",{name:"keywords",content:"feature request, open roadmap, user voice, feature request tracking, issue tracker open source "})),r.a.createElement(K,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"product-introduction"},r.a.createElement("div",null,r.a.createElement("h1",null,"TELL US YOUR STORY"),r.a.createElement("h2",{className:"subheader"},"Share with us how you use our products, relate to other users' stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience.")),r.a.createElement("div",{className:"img-wrap"},r.a.createElement("img",{className:"profile-picture",src:a(148),alt:"profile pic"}))),r.a.createElement(D,null))),u&&b?r.a.createElement(h,{showButtons:!0,onCancel:w,isActive:u,show:function(){return f(!1)},onOk:y},r.a.createElement(r.a.Fragment,null,b.message,r.a.createElement(i.a,{className:"link link-default",to:"/".concat(b.link)},"View privacy policy"))):"")},z=a(16),G=a(290),Q=function(e){var t=e.type,a=e.status,n=e.message;return r.a.createElement("div",null,a?r.a.createElement("div",{className:"form-error alert alert-section alert-danger"},r.a.createElement("i",{className:"eos-icons alert-icon"},"error"),r.a.createElement("div",{class:"alert-body"},null!==a&&a,null!==n&&n)):r.a.createElement("div",{className:"form-error"},r.a.createElement("i",{className:"eos-icons"},"error"),"required"===t&&"This is required","validate"===t&&"Passwords do not match","emptyDescription"===t&&"Description cannot be empty",null!==n&&n))},X=function(e){var t=e.translator,a=Object(n.useRef)(),c=Object(n.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement("div",{className:"dropdown-container",ref:a},r.a.createElement(b,{type:"button",className:"btn btn-secondary",onClick:function(e){i(!o)}},o?r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_up"):r.a.createElement("i",{className:"eos-icons"},"keyboard_arrow_down"),"\xa0 Language"),o?r.a.createElement("div",{className:"dropdown"},r.a.createElement("ul",{className:"dropdown-list"},r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("en"),i(!1)}},"English"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("es"),i(!1)}},"Spanish"))):"")},J=a(100),Z=a.n(J),$=function(){return r.a.createElement("div",{className:"social-media"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/eosdesignsystem?lang=en"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 60"},r.a.createElement("g",{"data-name":"Group 62"},r.a.createElement("g",{"data-name":"Rectangle 278"},r.a.createElement("path",{"data-name":"Rectangle 1959",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"Path 18"},r.a.createElement("path",{"data-name":"Path 628",d:"M20.032 6.899a7.368 7.368 0 01-1.887.521 3.1 3.1 0 001.431-1.822 6.77 6.77 0 01-2.082.813A3.291 3.291 0 0011.8 8.656a2.742 2.742 0 00.1.748 9.284 9.284 0 01-6.8-3.448 3.584 3.584 0 00-.423 1.659 3.286 3.286 0 001.464 2.733 3.319 3.319 0 01-1.5-.423v.033a3.283 3.283 0 002.639 3.221 3.008 3.008 0 01-1.5.065 3.3 3.3 0 003.059 2.278 6.642 6.642 0 01-4.1 1.4 6.364 6.364 0 01-.781-.033 9.184 9.184 0 005.076 1.5 9.306 9.306 0 009.371-9.24v-.558a6.727 6.727 0 001.627-1.692z",fill:"#fff"})))))),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/company/eosdesignsystem/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 61"},r.a.createElement("g",{"data-name":"Group 63"},r.a.createElement("g",{"data-name":"Rectangle 280"},r.a.createElement("path",{"data-name":"Rectangle 1961",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"iconfinder 201-LinkedIn 192159"},r.a.createElement("g",{"data-name":"Path 19"},r.a.createElement("path",{"data-name":"Path 630",d:"M16.802 19.604v-6.058a1.8 1.8 0 00-1.747-1.621 1.9 1.9 0 00-1.854 1.541v6.138h-3.23l.053-10.007h3.124l-.025 1.262a3.139 3.139 0 013.106-1.644c2.453 0 3.565 1.41 3.772 4.047v6.347zM6.011 8.175a1.788 1.788 0 11.438 0 1.789 1.789 0 01-.438 0zm1.993 11.441H4.032V9.622l3.97-.025z",fill:"#fff"}))))))))},ee=function(){var e=Object(G.a)().t;return r.a.createElement("div",{className:"container-left"},r.a.createElement("div",{className:"container-left-content"},r.a.createElement("div",{className:"header header-uppercase"},e("authentication:header-left")),r.a.createElement("p",null,e("authentication:user-stories-description")),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,e("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))),r.a.createElement($,null)))},te=function(e){var t=e.children,a=e.logo,n=Object(G.a)(),c=n.t,s=n.i18n;return r.a.createElement("div",{className:"container-right"},r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("div",{className:"image image-logo eos-logo-resize"},r.a.createElement("img",{src:null!==a&&void 0!==a?a:Z.a,alt:"EOS Logo"})),r.a.createElement(X,{translator:s})),t,r.a.createElement("div",{className:"footer"},r.a.createElement("span",null,r.a.createElement("i",{className:"eos-icons"},"copyright"),r.a.createElement("span",null," ",c("authentication:footer-right")," ")),r.a.createElement("a",{className:"link link-default",href:"/policies"}," ","Cookies and Privacy policy")),r.a.createElement("div",{className:"cookies-mobile"},r.a.createElement("p",null,c("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))))},ae=function(e){var t=e.children;return r.a.createElement("div",{className:"authentication-wrapper"},r.a.createElement("div",{className:"authentication"},t))},ne=function(e){var t=e.message,a=Object(G.a)().t,c=H().login,s=Object(z.a)(),o=s.register,u=s.handleSubmit,f=s.errors,E=Object(n.useState)(!1),v=Object(l.a)(E,2),h=v[0],g=v[1],y=Object(n.useContext)(M),w=y.state,N=y.dispatch,O=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({identifier:t.identifier,password:t.password});case 3:a=e.sent,localStorage.setItem("id",a.user.id),localStorage.setItem("username",a.user.username),localStorage.setItem("email",a.user.email),N({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return w.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Login | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ae,null,r.a.createElement(ee,null),r.a.createElement(te,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:u(O)},r.a.createElement("div",{className:"header"},a("authentication:title-sign-in")),t&&r.a.createElement(Q,{message:t}),w.errorCode&&r.a.createElement(Q,{status:w.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"identifer"},a("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"identifier",ref:o({required:!0})}),f.identifier&&r.a.createElement(Q,{type:f.identifier.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},a("authentication:password-label")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"input-default",type:h?"text":"password",name:"password",ref:o({required:!0})}),r.a.createElement("div",{className:"input-group-append",onClick:function(){return g(!h)}},r.a.createElement("i",{className:"eos-icons eos-18"},h?"visibility_off ":"visibility"))),f.password&&r.a.createElement(Q,{type:f.password.type})),r.a.createElement(b,{type:"submit",className:"btn btn-default"},a("authentication:login-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/forgotPassword"},a("authentication:forgot-password")),r.a.createElement(i.a,{className:"link link-default","data-cy":"link-create-account",to:"/register"},a("authentication:create-account")))))))},re=function(){var e=H().registerUser,t=Object(n.useContext)(M),a=t.state,c=t.dispatch,s=Object(z.a)(),o=s.register,l=s.handleSubmit,u=s.errors,f=Object(G.a)().t,E=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({username:a.username,email:a.email,password:a.password});case 3:n=t.sent,localStorage.setItem("status",n.status),localStorage.setItem("id",n.user.id),localStorage.setItem("username",n.user.username),localStorage.setItem("email",n.user.email),c({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return a.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Registration page | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ae,null,r.a.createElement(ee,null),r.a.createElement(te,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:l(E)},r.a.createElement("div",{className:"header"},f("authentication:title-sign-up")),a.errorCode&&r.a.createElement(Q,{status:a.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"username"},f("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"username","data-cy":"username",ref:o({required:!0})}),u.username&&r.a.createElement(Q,{type:u.username.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},f("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"email","data-cy":"email",ref:o({required:!0})}),u.email&&r.a.createElement(Q,{type:u.email.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},f("authentication:password-label")),r.a.createElement("input",{className:"input-default",type:"password",name:"password","data-cy":"password",ref:o({required:"This is required",minLength:{value:8,message:"Password must have at least 8 characters"}})}),u.password&&r.a.createElement(Q,{message:u.password.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("div",{className:"flex flex-row flex-align-center "},r.a.createElement("input",{type:"checkbox",name:"tc","data-cy":"tc",ref:o({required:"You must accept our Terms and Conditions"})}),r.a.createElement("label",{htmlFor:"tc"},"I agree to the"," ",r.a.createElement(i.a,{className:"link link-default",to:"/policies"},"Terms and Conditions"),u.tc&&r.a.createElement(Q,{message:u.tc.message})))),r.a.createElement(b,{type:"submit",className:"btn btn-default","data-cy":"btn-register"},f("authentication:register-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},f("authentication:existing-user")))))))},ce=function(){var e=Object(G.a)().t,t=Object(n.useContext)(M).state,a=H().forgotPassword,c=Object(z.a)(),s=c.register,o=c.handleSubmit,u=c.errors,f=Object(n.useState)(""),E=Object(l.a)(f,2),v=E[0],h=E[1],g=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({email:t.email});case 3:n=e.sent,h(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Forgot password? | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ae,null,r.a.createElement(ee,null),r.a.createElement(te,null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),v?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"We have e-mailed you a password reset link")):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(Q,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:o(g)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},e("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"email",name:"email",ref:s({required:!0})}),u.email&&r.a.createElement(Q,{type:u.email.type})),r.a.createElement(b,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:existing-user"))))))))},se=function(){var e=Object(G.a)().t,t=Object(n.useContext)(M).state,a=H().resetPassword,c=Object(z.a)(),s=c.register,o=c.handleSubmit,u=c.errors,f=Object(i.d)(),E=Object(n.useState)(""),v=Object(l.a)(E,2),h=v[0],g=v[1],y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({code:f.search.slice(6),password:t.password,passwordConfirmation:t.passwordConfirmation});case 3:n=e.sent,g(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Reset your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ae,null,r.a.createElement(ee,null),r.a.createElement(te,null,r.a.createElement("div",null,h?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(Q,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:o(y)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:s({required:!0})}),u.password&&r.a.createElement(Q,{type:u.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:s({required:!0})}),u.passwordConfirmation&&r.a.createElement(Q,{type:u.passwordConfirmation.type})),r.a.createElement(b,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))))))))},oe=a(104),le=a.n(oe),ie=a(105),ue=a.n(ie),me=(a(208),(new le.a).set({html:!0}));var de=function(e){var t=e.value,a=e.callback,c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],i=s[1];return r.a.createElement(ue.a,{config:{view:{html:!1}},plugins:["header","font-bold","font-italic","list-unordered","list-ordered","link","mode-toggle"],style:{height:"350px"},renderHTML:function(e){return me.render(e)},onChange:function(e){var n=e.html,r=e.text;"undefined"===typeof t&&i(r),a(n,r)},value:null!==t&&void 0!==t?t:o})},pe=a(106),fe=function(e){var t=e.title,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1],i=Object(n.useCallback)(Object(pe.debounce)(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getStoriesByTitle(t);case 2:a=e.sent,o(a.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),600),[]);return Object(n.useEffect)((function(){t&&i(t)}),[t,i]),t?r.a.createElement("div",{className:"flex flex-column title-search"},r.a.createElement("h4",null,r.a.createElement("i",{className:"eos-icons"},"arrow_forward"),s.length>0?" We found some matching results":" No matching stories found. Go ahead and create one."),s.map((function(e,t){return r.a.createElement("div",{className:"story title-search-results",onClick:function(){return window.open("/story/".concat(e.id),"_blank")},key:t},r.a.createElement("div",{className:"stories-content title-search-result"},r.a.createElement("h4",null,U(e.Title,80))),r.a.createElement("div",{className:"icon-display"},e.followers.length,r.a.createElement("i",{className:"eos-icons"},"thumb_up")))}))):""},Ee=a(43),ve=function(e){var t=e.attachments,a=e.setAttachments,n=t.map((function(e){return r.a.createElement("div",{className:"preview-root",key:e.name},r.a.createElement("button",{className:"preview-remove-button",onClick:function(){return n=e.name,void a(t.filter((function(e){return e.name!==n})));var n}},"\xd7"),r.a.createElement("div",{className:"preview-inner"},r.a.createElement("img",{src:e.preview,className:"preview-image",alt:"preview"})))}));return r.a.createElement("div",{className:"preview-container"},n)},be=function(e){var t=e.attachments,a=e.setAttachments,c=Object(Ee.a)({multiple:!0,onDrop:function(e){a((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))))}))}}),s=c.getRootProps,o=c.getInputProps;return Object(n.useEffect)((function(){return function(){t.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[t]),r.a.createElement("section",{className:"container"},r.a.createElement("div",s({className:"dropzone"}),r.a.createElement("input",o()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),r.a.createElement(ve,{attachments:t,setAttachments:a}))},he={None:""},ge=function(){var e=Object(n.useContext)(M).state,t=Object(z.a)(),a=t.register,c=t.handleSubmit,s=t.errors,o=t.watch,u=Object(n.useState)("None"),f=Object(l.a)(u,2),v=f[0],h=f[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),N=w[0],O=w[1],j=Object(n.useState)(he),k=Object(l.a)(j,2),x=k[0],S=k[1],A=Object(n.useState)(""),U=Object(l.a)(A,2),T=U[0],R=U[1],I=Object(n.useState)([]),L=Object(l.a)(I,2),F=L[0],B=L[1],D=Object(n.useState)([]),_=Object(l.a)(D,2),V=_[0],H=_[1],Y=Object(n.useState)([]),W=Object(l.a)(Y,2),G=W[0],X=W[1],J=Object(E.usePromiseTracker)().promiseInProgress,Z=Object(n.useState)(0),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([]),re=Object(l.a)(ae,2),ce=re[0],se=re[1];Object(n.useLayoutEffect)((function(){function e(){te(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getCategories();case 2:t=e.sent,B(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e());var t=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getProductsWithTemplates();case 2:t=e.sent,a=t.data.data.products,X(a),n={},a.forEach((function(e){var t;n[e.id]=null!==(t=e.product_template)&&void 0!==t?t:""})),S(Object(g.a)(Object(g.a)({},he),n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(t());var a=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPriorities();case 2:t=e.sent,H(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(a())}),[]);var oe=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Description=P(T),(a=new FormData).append("data",JSON.stringify(t)),ce.length&&ce.forEach((function(e){a.append("files.Attachment",e)})),e.next=6,C.createStory(a);case 6:Object(i.c)("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"New story | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(K,null),J?r.a.createElement(q,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"flex flex-row body-wrapper"},r.a.createElement("div",{className:"newstory"},r.a.createElement("h3",null,"New Story"),r.a.createElement("form",{className:"form-default",onSubmit:c(oe)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{className:"input-default",type:"text",name:"Title","data-cy":"title",autoComplete:"off",ref:a({required:"Title cannot be empty"})}),s.Title&&r.a.createElement(Q,{message:s.Title.message})),ee<=1120?r.a.createElement(fe,{title:o("Title")}):"",r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"product"},"Product"),r.a.createElement("select",{className:"select-default",name:"product","data-cy":"product",onChange:function(e){var t,a=e.target.value,n=G.find((function(e){return e.id===a}));h(null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"None")},ref:a({required:"Product must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a product"),G&&G.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.Name)}))),s.product&&r.a.createElement(Q,{message:s.product.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{className:"select-default",name:"Category","data-cy":"category",ref:a({required:"Category must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a category"),F&&F.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.Category&&r.a.createElement(Q,{message:s.Category.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"priority"},"Priority"),r.a.createElement("select",{className:"select-default",name:"Priority","data-cy":"priority",ref:a({required:"Priority must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select priority"),V&&V.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.Priority&&r.a.createElement(Q,{message:s.Priority.message})),r.a.createElement("div",{className:"form-element","data-cy":"description-editor"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement(de,{callback:function(e,t){var a={};a[v]=t,R(e),O(!1),S(Object(g.a)(Object(g.a)({},x),a))},value:x[v]}),N&&r.a.createElement(Q,{type:"emptyDescription"})),r.a.createElement(be,{attachments:ce,setAttachments:se}),r.a.createElement("div",{className:"flex flex-row flex-center"},r.a.createElement(b,{type:"submit","data-cy":"btn-submit",className:"btn btn-default",onClick:function(){(null===T||void 0===T?void 0:T.length)||O(!0)}},"Submit")))),ee>1120?r.a.createElement(fe,{title:o("Title")}):""))):r.a.createElement(ne,{message:"Please login to create a new story"})},ye=a(286),we=a(287),Ne=a(288),Oe=a(289),je=a(108),ke=a.n(je),xe=function(e){var t,a=e.imageArray,n=null!==(t=null===a||void 0===a?void 0:a.map((function(e){return{original:e.url,thumbnail:e.url}})))&&void 0!==t?t:[];return r.a.createElement(ke.a,{items:n,showBullets:!0})},Se=function(e){var t=e.id,a=e.attachments,n=e.setAttachments,c=e.addComment,s=e.comment,o=e.setComment,l=e.cta,i=Object(z.a)(),u=i.register,p=i.errors,E=i.handleSubmit,v=function(){var e=Object(d.a)(m.a.mark((function e(t){var r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.target.files,c=[],s=0;s<r.length;s++)c.push(Object.assign(r[s],{preview:URL.createObjectURL(r[s])}));n([].concat(Object(f.a)(a),c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"comment-form",onSubmit:E(c)},r.a.createElement("div",{className:"comment-input"},r.a.createElement("textarea",{rows:"5",cols:"25",name:"Comments",value:s,"data-cy":"comment-input-".concat(t),ref:u({required:!0}),onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",{className:"file-input"},r.a.createElement("input",{type:"file",id:"file-".concat(t),className:"file",multiple:!0,onChange:v}),r.a.createElement("label",{htmlFor:"file-".concat(t),className:"file-button-label"},r.a.createElement("i",{className:"eos-icons"},"attachment")))),p.Comments&&r.a.createElement(Q,{message:"Reply cannot be empty"}),r.a.createElement(ve,{attachments:a,setAttachments:n}),r.a.createElement(b,{className:"btn btn-default","data-cy":"btn-comment-".concat(t)},l))},Ce=function(e,t){t.length&&t.forEach((function(t){e.append("files.attachment",t)}))},Ae=function(e,t,a){e.find((function(e){return e===a+1}))?t((function(e){return e.filter((function(e){return e!==a+1}))})):t((function(e){return e.concat(a+1)}))},Pe=function(e){var t=e.storyId,a=Object(n.useContext)(M).state,c=localStorage.getItem("id"),s=Object(n.useState)(""),o=Object(l.a)(s,2),u=o[0],p=o[1],f=Object(n.useState)(),E=Object(l.a)(f,2),v=E[0],h=E[1],g=Object(n.useState)(""),y=Object(l.a)(g,2),w=y[0],N=y[1],O=Object(n.useState)([]),j=Object(l.a)(O,2),k=j[0],x=j[1],S=Object(n.useState)(),A=Object(l.a)(S,2),P=A[0],U=A[1],T=Object(n.useState)([]),R=Object(l.a)(T,2),I=R[0],q=R[1],L=Object(n.useState)([]),F=Object(l.a)(L,2),B=F[0],D=F[1],_=Object(n.useState)([]),V=Object(l.a)(_,2),H=V[0],Y=V[1],K=Object(n.useCallback)(Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getComments(t);case 2:a=e.sent,x(a.data.data.userStory.user_story_comments);case 4:case"end":return e.stop()}}),e)}))),[t]);Object(n.useEffect)((function(){K()}),[K]),Object(n.useEffect)((function(){return function(){B.forEach((function(e){return URL.revokeObjectURL(e.preview)})),H.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[B,H]);var W=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,a.user=c,a.user_story=t,n.append("data",JSON.stringify(a)),Ce(n,B),e.next=7,C.postComment(n);case 7:p(""),D([]),K();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,t.user=c,t.user_story_comment=v,a.append("data",JSON.stringify(t)),Ce(a,H),e.next=7,C.postCommentReply(a);case 7:N(""),Y([]),U(null),K();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"comments-wrapper"},r.a.createElement("h3",null,"Comments"),k.length?k.map((function(e,t){return r.a.createElement("div",{className:"comment",key:t},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content","data-cy":"comment-content"},r.a.createElement(i.a,{className:"link link-default","data-cy":"comment-username",to:"/profile/".concat(e.user.id)},e.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(e.createdAt.slice(0,10),"  ").concat(e.createdAt.slice(11,19)))),r.a.createElement("p",null,e.Comments),0!==e.attachment.length?r.a.createElement("div",{className:"comment-gallery-container"},r.a.createElement(xe,{imageArray:e.attachment})):"",r.a.createElement("div",{className:"reply-action"},a.auth&&r.a.createElement(b,{className:"btn btn-default",onClick:function(){h(e.id),function(e,t,a){t(e===a+1?null:a+1)}(P,U,t),Ae(I,q,t)}},"Reply"),e.user_story_comment_replies.length>0?r.a.createElement(b,{className:"btn btn-default",onClick:function(){Ae(I,q,t)}},"View Replies (",e.user_story_comment_replies.length,")"):""),I.find((function(e){return e===t+1}))&&e.user_story_comment_replies.map((function(t,a){return r.a.createElement("div",{className:"comment",key:a},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(t.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content"},r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.user.id)},t.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(t.createdAt.slice(0,10),"  ").concat(t.createdAt.slice(11,19)))),r.a.createElement("p",null,t.Comments),0!==t.attachment.length?r.a.createElement("div",{className:"comment-gallery-container"},r.a.createElement(xe,{imageArray:t.attachment})):""))})),P===t+1&&a.auth&&r.a.createElement(Se,{id:1,attachments:H,setAttachments:Y,addComment:z,comment:w,setComment:N,cta:"Add Reply"})))})):r.a.createElement("h3",null,"No comments yet"),a.auth&&r.a.createElement("div",null,r.a.createElement(Se,{id:2,attachments:B,setAttachments:D,addComment:W,comment:u,setComment:p,cta:"Add Comment"})))},Ue=function(e){var t=e.currentStatus,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){!function(){for(var e=[],a=0;a<B.stateList.length&&(e.push(B.stateList[a].status),B.stateList[a].status!==t);a++);o(e)}()}),[t]),r.a.createElement("div",{className:"flex flex-row flex-space-around status-wrapper"},B.stateList.map((function(e,t){return r.a.createElement("div",{className:"status-element",key:t},r.a.createElement("div",{className:"status flex flex-column"},s.includes(e.status)?r.a.createElement("i",{className:"eos-icons tick"},"check"):r.a.createElement("i",{className:"eos-icons no-tick"}),r.a.createElement("h4",null," ",e.status," ")))})))},Te=function(e){var t=e.storyId,a=localStorage.getItem("id"),c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],u=s[1],f=Object(n.useState)(""),v=Object(l.a)(f,2),y=v[0],w=v[1],N=Object(n.useState)(!1),O=Object(l.a)(N,2),j=O[0],k=O[1],x=Object(n.useState)(!1),S=Object(l.a)(x,2),U=S[0],T=S[1],R=Object(E.usePromiseTracker)().promiseInProgress,I=Object(n.useState)(!1),L=Object(l.a)(I,2),F=L[0],B=L[1],D=function(){B(!F)};Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getStory(t);case 2:a=e.sent,u(a.data.data.userStory);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e()),a&&function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.checkAuthor(a,t);case 2:e.sent.data&&k(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,a]);var _=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y.length<=0)){e.next=2;break}return e.abrupt("return");case 2:return a.preventDefault(),n=o.Description+y,r=P(n),e.next=7,C.updateUserStoryDescription(t,r);case 7:T(!1),u(Object(g.a)(Object(g.a)({},o),{},{Description:"".concat(n)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(null===o)return Object(i.c)("/404",{replace:!0}),null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"EOS User story"),r.a.createElement("meta",{name:"description",content:"Share with us how you use our products, relate to other users stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience."}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(K,null),R?r.a.createElement(q,null):o?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement(Ue,{currentStatus:o.user_story_status.Status}),r.a.createElement("div",{className:"story-heading"},r.a.createElement("h3",null,o.Title),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement(A,{story:o}),r.a.createElement("div",{className:"author-information"},r.a.createElement("h4",null,"By:"," ",r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(o.author.id)},o.author.username)),r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(o.author.username,".svg"),alt:"Default User Avatar"}))))),U?r.a.createElement("div",{"data-cy":"edit-description"},r.a.createElement(de,{callback:function(e){w(e)}})):r.a.createElement("div",{className:"story-description",dangerouslySetInnerHTML:{__html:o.Description},"data-cy":"story-description"}),r.a.createElement("div",{className:"story-buttons-container"},j&&!U?r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{className:"btn btn-default","data-cy":"btn-edit",onClick:function(){return T(!0)}},"Edit")):"",r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{className:"share-story",onClick:D},r.a.createElement("i",{className:"eos-icons"}," share ")),r.a.createElement(b,{className:"share-story",onClick:function(){var e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}},r.a.createElement("i",{className:"eos-icons"},"content_copy"))),U?r.a.createElement(b,{className:"btn btn-default",onClick:_,"data-cy":"btn-save"},"Save"):"",U?r.a.createElement(b,{className:"btn btn-default",onClick:function(){return T(!1)}},"Cancel"):"",F&&r.a.createElement(h,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Share"),r.a.createElement(ye.a,{url:window.location,className:"share-button",title:"EOS User Story - POST Stories. GET Features.",hashtags:["EOS","userstory"],onShareWindowClose:D},r.a.createElement(we.a,null)),r.a.createElement(Ne.a,{url:window.location,className:"share-button",onShareWindowClose:D},r.a.createElement(Oe.a,null))),handleClose:D,active:F})),0!==o.Attachment.length?r.a.createElement("div",{className:"gallery-container"},r.a.createElement(xe,{imageArray:o.Attachment})):"",r.a.createElement(Pe,{storyId:t})))):"")},Re=function(){var e=Object(n.useContext)(M).state,t=Object(n.useState)("My Submissions"),a=Object(l.a)(t,2),c=a[0],s=a[1],o=localStorage.getItem("id");return e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"My stories | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(K,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper my-stories"},r.a.createElement("h3",null,"My Stories"),r.a.createElement("div",{className:"flex flex-row roadmap-one"},r.a.createElement(b,{className:"My Submissions"===c?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return s("My Submissions")}},"My Submissions"),"\xa0 \xa0",r.a.createElement(b,{className:"Following"===c?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return s("Following")}},"Following")),r.a.createElement(D,{authorId:"My Submissions"===c?o:null,followerId:"Following"===c?o:null})))):r.a.createElement(ne,{message:"Please login to access your stories"})},Ie=a(17),qe=a(32),Le=a.n(qe),Fe=function(e){var t=e.userId,a=e.show,c=e.setShow,s=e.profilePicURL,o=e.profilePicId,i=Object(n.useState)(null),u=Object(l.a)(i,2),p=u[0],f=u[1],E=Object(n.useState)(null),v=Object(l.a)(E,2),b=v[0],g=v[1],y=Object(n.useState)(!s),O=Object(l.a)(y,2),j=O[0],k=O[1],x=Object(n.useState)(!1),S=Object(l.a)(x,2),C=S[0],A=S[1],P=function(){URL.revokeObjectURL(null===b||void 0===b?void 0:b.preview),g(null),c(!1)},U=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||j&&o){e.next=3;break}return P(),e.abrupt("return");case 3:if(!s||!j||b){e.next=15;break}return e.prev=4,A(!0),e.next=8,w.a.delete("".concat(N.b,"/upload/files/").concat(o),{withCredentials:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),f("Unable to update profile picture. Please try again later.");case 13:e.next=35;break;case 15:if((a=new FormData).append("files",b),a.append("ref","user"),a.append("refId",t),a.append("source","users-permissions"),a.append("field","profilePicture"),e.prev=21,A(!0),!s||!j){e.next=28;break}return e.next=26,w.a.all([w.a.delete("".concat(N.b,"/upload/files/").concat(o),{withCredentials:!0}),w.a.post("".concat(N.b,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})]);case 26:e.next=30;break;case 28:return e.next=30,w.a.post("".concat(N.b,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),f("Error updating profile picture. Try updating later");case 35:A(!1),c(!1),window.location.reload();case 38:case"end":return e.stop()}}),e,null,[[4,10],[21,32]])})));return function(){return e.apply(this,arguments)}}(),T=Object(Ee.a)({multiple:!1,accept:"image/jpeg, image/png, image/gif",minSize:0,maxSize:153600,onDrop:function(e,t){var a=Object(l.a)(e,1)[0],n=Object(l.a)(t,1)[0];try{g(Object.assign(a,{preview:URL.createObjectURL(a)})),f(null)}catch(c){var r=n.errors.map((function(e){return e.code}));-1!==r.indexOf("file-too-large")&&f("Please upload a file smaller than 150 kB"),-1!==r.indexOf("file-invalid-type")&&f("Please upload a file with .png, .jpg/.jpeg or .gif extensions")}}}),R=T.getRootProps,I=T.getInputProps;return Object(n.useEffect)((function(){return function(){URL.revokeObjectURL(null===b||void 0===b?void 0:b.preview)}}),[b]),C?r.a.createElement(h,{isActive:!0,showButtons:!1},r.a.createElement(q,null)):r.a.createElement(h,{isActive:a,handleClose:function(){return c(!1)},onCancel:P,okText:"Save",onOk:U,showButtons:!0},r.a.createElement("section",{className:"container"},!j&&r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){k(!0),g(null)}},r.a.createElement("i",{className:"eos-icons"},"delete")),r.a.createElement("img",{src:s,className:"user-profile-avatar-img",alt:"preview"})),j&&(b?r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){URL.revokeObjectURL(b.preview),g(null)}},r.a.createElement("i",{className:"eos-icons"},"delete")),r.a.createElement("img",{src:b.preview,className:"user-profile-avatar-img",alt:"preview"})):r.a.createElement("div",R({className:"dropzone"}),r.a.createElement("input",I()),r.a.createElement("p",null,"Drag 'n' drop your image here, or click to select one. For best results upload images with 1:1 aspect ratio. Maximum allowed file-size is 150 kB."))),!!p&&r.a.createElement(Q,{message:p})))},Be=function(e){return r.a.createElement("input",Object.assign({className:"input-default",type:"text"},e))},De=function(e){return r.a.createElement("textarea",Object.assign({type:"text"},e,{rows:4,cols:60}))},_e=function(e){var t=e.name,a=e.value,c=e.type,s=e.handleInputChange,o=e.updateProfile,i=e.children,u=e.allowEditing,m=Object(v.a)(e,["name","value","type","handleInputChange","updateProfile","children","allowEditing"]),d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"editable-label"},!f&&r.a.createElement(r.a.Fragment,null,i,u&&r.a.createElement("button",{className:"editable-label-edit-btn",onClick:function(){return E(!f)}},r.a.createElement("i",{className:"eos-icons"},"mode_edit"))),f&&r.a.createElement(r.a.Fragment,null,function(e){switch(e){case"text":return r.a.createElement(Be,Object.assign({onChange:s,defaultValue:a,onKeyPress:function(e){s(e),"Enter"===e.key&&(o(),E(!f))},name:t},m));case"textArea":return r.a.createElement(De,Object.assign({onChange:s,defaultValue:a,onKeyPress:s,name:t},m));default:return"No component was found"}}(c),r.a.createElement("button",{onClick:function(){E(!f),o()}},r.a.createElement("i",{className:"eos-icons"},"save"))))},Ve=function(e){var t=e.allowEditing,a=e.showModal;return t?r.a.createElement("div",{className:"user-profile-edit-badge",onClick:a},"Edit ",r.a.createElement("i",{className:"eos-icons"},"mode_edit")):null},Me=function(e){var t,a,c,s,o,i,u=e.user,m=e.allowEditing,d=Object(n.useState)(!1),p=Object(l.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"user-profile-avatar"},r.a.createElement(Ve,{allowEditing:m,showModal:function(){return E(!0)}}),u?r.a.createElement("img",{className:"user-profile-avatar-img",src:null!==(t=null===u||void 0===u||null===(a=u.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(u.username,".svg"),alt:"User avatar"}):r.a.createElement(Le.a,{circle:!0,width:150,height:150}),f&&r.a.createElement(Fe,{userId:u.id,show:f,setShow:E,profilePicURL:null!==(c=null===u||void 0===u||null===(s=u.profilePicture)||void 0===s?void 0:s.url)&&void 0!==c?c:null,profilePicId:null!==(o=null===u||void 0===u||null===(i=u.profilePicture)||void 0===i?void 0:i.id)&&void 0!==o?o:null}))},He=function(e){var t=e.user;return r.a.createElement("div",{className:"user-profile-settings"},t?r.a.createElement("ul",null,r.a.createElement("li",null,"Email address:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.email)),r.a.createElement("li",null,"Username:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.username)),r.a.createElement("li",null,r.a.createElement("a",{className:"link link-default",href:"/changePassword"},"Change password"))):r.a.createElement(Le.a,{width:200}))},Ye=function(e){var t,a=e.user,n=e.handleInputChange,c=e.allowEditing,s=e.updateProfile;return r.a.createElement("div",{className:"user-profile-details"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{type:"text",name:"Name",value:null!==(t=a.Name)&&void 0!==t?t:a.username,className:"input-default",handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your name"},r.a.createElement("h2",{className:"user-profile-name"},a.Name?a.Name:a.username)),r.a.createElement(_e,{type:"textArea",name:"Bio",value:a.Bio,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Say something about yourself"},r.a.createElement("p",null,a.Bio||(c?"Say something about yourself":"Hi There!")))):r.a.createElement(Le.a,{count:2}),r.a.createElement("div",{className:"user-profile-extra"},a?r.a.createElement("ul",null,c||a.Profession?r.a.createElement("li",null,"Profession",r.a.createElement(_e,{type:"text",name:"Profession",value:a.Profession,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your job title"},r.a.createElement("span",null,a.Profession?a.Profession:"Your job title"))):null,c||a.Company?r.a.createElement("li",null,"Company",r.a.createElement(_e,{type:"text",name:"Company",value:a.Company,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your company name"},r.a.createElement("span",null,a.Company?a.Company:"Your company name"))):null,c||a.LinkedIn?r.a.createElement("li",null,"LinkedIn",r.a.createElement(_e,{type:"text",name:"LinkedIn",value:a.LinkedIn,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your LinkedIn username"},r.a.createElement("span",null,a.LinkedIn?r.a.createElement("a",{className:"link link-default",href:"https://www.linkedin.com/in/".concat(null===a||void 0===a?void 0:a.LinkedIn),target:"_blank",rel:"noopener noreferrer"},a.LinkedIn):"Your LinkedIn username"))):null,c||a.Twitter?r.a.createElement("li",null,"Twitter",r.a.createElement(_e,{type:"text",name:"Twitter",value:a.Twitter,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your Twitter handle"},r.a.createElement("span",null,a.Twitter?r.a.createElement("a",{className:"link link-default",href:"https://twitter.com/".concat(null===a||void 0===a?void 0:a.Twitter),target:"_blank",rel:"noopener noreferrer"},a.Twitter?"@".concat(a.Twitter):""):"Your Twitter handle"))):null):r.a.createElement(Le.a,{height:70})))},Ke=function(e){var t=e.allowEditing,a=e.user,n=e.handleInputChange,c=e.updateProfile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-profile margin-top-xxl margin-bottom-m"},r.a.createElement(Me,{user:a,allowEditing:t}),r.a.createElement(Ye,{user:a,handleInputChange:n,updateProfile:c,allowEditing:t})),t&&r.a.createElement(He,{user:a}))},We=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(M).state,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2)[1],f=function(){var t=Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.updateUser(Object(g.a)({id:e},s));case 2:t.sent&&u(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){e&&function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getUserDetails(e);case 2:a=t.sent,o(a.data.data.user);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),t.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"My profile | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(K,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(Ke,{user:""===s?"":Object.assign(s,{id:e}),handleInputChange:function(e){o(Object(g.a)(Object(g.a)({},s),{},Object(Ie.a)({},e.target.name,e.target.value)))},updateProfile:f,allowEditing:!0})))))):r.a.createElement(ne,{message:"Please login to access your profile"})},ze=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"404 Not Found | EOS User story")),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper pg-404"},r.a.createElement("svg",{className:"svg-right flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-right"},r.a.createElement("path",{id:"r-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"r-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))),r.a.createElement("h1",{className:"heading-404"},"404"),r.a.createElement("hr",{className:"hr-404"}),r.a.createElement("p",{className:"p-404"},"The page you are looking for could not be found."),r.a.createElement(b,{className:"btn btn-default btn-404",onClick:function(){return Object(i.c)("/")}},"Back to Home"),r.a.createElement("svg",{className:"svg-left flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-left"},r.a.createElement("path",{id:"l-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"l-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))))))},Ge=function(e){var t=e.profileId,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){t&&function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getUserDetails(t);case 2:a=e.sent,o(a.data.data.user);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),null===s?(Object(i.c)("/404",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"".concat(s.username," | EOS User story")),r.a.createElement("meta",{name:"description",content:"".concat(s.Bio)}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(K,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(Ke,{user:s}))),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("h3",null,"Stories by this user"),r.a.createElement(D,{authorId:t})))))},Qe=function(){var e=Object(G.a)().t,t=Object(n.useContext)(M),a=t.state,c=t.dispatch,s=H(),o=s.changePassword,u=s.logout,f=Object(z.a)(),E=f.register,v=f.handleSubmit,h=f.errors,y=Object(n.useState)(""),w=Object(l.a)(y,2),N=w[0],O=w[1],j=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(Object(g.a)(Object(g.a)({},t),{},{id:localStorage.getItem("id")}));case 3:a=e.sent,O(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:c({type:"DEAUTHENTICATE"}),Object(i.c)("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Change your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ae,null,r.a.createElement(ee,null),r.a.createElement(te,null,r.a.createElement("div",null,N?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:success")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("span",{className:"link link-default",onClick:k},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,a.errorCode&&r.a.createElement(Q,{status:a.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:v(j)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:old-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"oldPassword",ref:E({required:!0})}),h.oldPassword&&r.a.createElement(Q,{type:h.oldPassword.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:E({required:!0})}),h.password&&r.a.createElement(Q,{type:h.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:E({required:!0})}),h.passwordConfirmation&&r.a.createElement(Q,{type:h.passwordConfirmation.type})),r.a.createElement(b,{type:"submit",className:"btn btn-default"},e("authentication:submit-label")))))))):r.a.createElement(ne,{message:"Please login to access your profile"})},Xe=a(110),Je=a.n(Xe),Ze=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(E.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getPolicies();case 2:a=e.sent,c(null===(t=a.data.data.userStoryPolicies)||void 0===t?void 0:t[0].Description);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Cookie & Privacy Policies | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(K,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},s?r.a.createElement(q,null):a?r.a.createElement(Je.a,null,a&&"".concat(a)):r.a.createElement("h3",null,"No policies"))))},$e=function(){var e=localStorage.getItem("id"),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(E.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getNotificationsByUserId(e);case 2:a=t.sent,s(a.data.data.userStoryNotifications);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(E.trackPromise)(t())}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Notifications | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(K,null),o?r.a.createElement(q,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("h3",null,"Notifications"),r.a.createElement("div",{className:"flex flex-column"},c.length>0?c.map((function(e,t){return r.a.createElement("div",{className:"notification",key:t,onClick:function(){return Object(i.c)("/".concat(e.link))}},r.a.createElement("div",{className:"notification-text"},e.message),r.a.createElement("div",{className:"notification-text"},"".concat(e.date.slice(0,10),"  ").concat(e.date.slice(11,19))))})):r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"notification-text"},"No notifications at the moment"))))))},et=function(e,t){switch(t.type){case"AUTHENTICATE":return Object(g.a)(Object(g.a)({},e),{},{auth:!0});case"DEAUTHENTICATE":return Object(g.a)(Object(g.a)({},e),{},{auth:!1});case"ERROR":return Object(g.a)(Object(g.a)({},e),{},{errorCode:t.payload});default:return e}},tt=function(){return r.a.createElement("div",{className:"footer-main"},r.a.createElement("a",{className:"link link-default",href:"/policies"},"Cookies and Privacy policy"),r.a.createElement("p",null,"We only use strictly necessary cookies"))},at={auth:!1,errorCode:null},nt=function(){var e=Object(n.useReducer)(et,at),t=Object(l.a)(e,2),a=t[0],c=t[1],s=localStorage.getItem("id");return Object(n.useEffect)((function(){window.addEventListener("storage",(function(e){localStorage.getItem("id")?c({type:"AUTHENTICATE"}):c({type:"DEAUTHENTICATE"})}))}),[]),Object(n.useEffect)((function(){c(s?{type:"AUTHENTICATE"}:{type:"DEAUTHENTICATE"})}),[s]),r.a.createElement(M.Provider,{value:{state:a,dispatch:c}},r.a.createElement(i.b,null,r.a.createElement(W,{path:"/"}),r.a.createElement(re,{path:"/register"}),r.a.createElement(ne,{path:"/login"}),r.a.createElement(ce,{path:"/forgotPassword"}),r.a.createElement(se,{path:"/resetPassword"}),r.a.createElement(ge,{path:"/newStory"}),r.a.createElement(Te,{path:"/story/:storyId"}),r.a.createElement(Re,{path:"/myStories"}),r.a.createElement(We,{path:"/myProfile"}),r.a.createElement(Ge,{path:"/profile/:profileId"}),r.a.createElement($e,{path:"/notifications"}),r.a.createElement(Qe,{path:"/changePassword"}),r.a.createElement(Ze,{path:"/policies"}),r.a.createElement(ze,{default:!0})),r.a.createElement(tt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=a(60),ct=a(31),st=a(111),ot={en:a(112),es:st};rt.a.use(ct.e).init({resources:ot,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});rt.a;s.a.render(r.a.createElement(o.a,null,r.a.createElement(nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a.p+"static/media/user-story-logo.ed111364.svg"}},[[115,1,2]]]);
//# sourceMappingURL=main.98dbfa49.chunk.js.map